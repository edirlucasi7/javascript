<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  
  <div class="component">
    <ul class="element"></ul>
  </div>


  <script>
    var component = document.querySelector('.component');
    
    var inputElement = document.createElement('input')
    component.appendChild(inputElement);

    var btnElement = document.createElement('button')
    btnElement.setAttribute('onclick', 'adicionar()');
    var textBtnElement = document.createTextNode('Criar novo nome')

    btnElement.appendChild(textBtnElement)
    component.appendChild(btnElement)

    var ulElement = document.querySelector('.element')

    var nomes = JSON.parse(localStorage.getItem('lista_nomes')) || []

    function adicionar() {
      nomes.push(inputElement.value)

      renderizaElemento();

      inputElement.value = "";

      inputElement.focus()
      
      salvarNoStorage()
      
    }
   
    function renderizaElemento() {
      ulElement.innerHTML = ''

      for(nome of nomes) {
        var list = document.createElement('li')
        var textElement = document.createTextNode(nome)

        var deletar = document.createElement('a')
        deletar.setAttribute('href', '#')

        var nomeDeletar = document.createTextNode('Excluir')

        var pos = nomes.indexOf(nome)
        deletar.setAttribute('onclick', 'excluirElemento(' + pos +')')

        list.appendChild(textElement)
        ulElement.appendChild(list)
        deletar.appendChild(nomeDeletar)
        list.appendChild(deletar)
    
      }
    }

    function excluirElemento(pos) {
      nomes.splice(pos, 1)

      renderizaElemento()

      salvarNoStorage()
    }

    function salvarNoStorage() {
      localStorage.setItem('lista_nomes', JSON.stringify(nomes))
    }

    renderizaElemento()

  </script>
</body>
</html>